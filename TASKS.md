
## Этап №1. Выпаривание

### 1. Новые Предметы

#### А. Варочный Осадок (BrewingSedimentItem)
*   Суть: "Флешка", хранящая список ингредиентов и их %.
*   NBT: Хранит список SedimentContent (Item + Percentage).
*   Визуал: Серая текстура (layer0) + Цветные вкрапления (layer1). Цвет берется из NBT (цвет исходного зелья).
*   Тултип: Показывает список содержимого (напр. "Огненный порошок: 85%").

#### Б. Наборы для Дистилляции (DistillationKitItem)
Расходники, влияющие на эффективность. Реализованы через Enum DistillationTier.
1.  Стеклянный: 50% выхода, ломается быстро.
2.  Укрепленный: 75% выхода.
3.  Индустриальный: 100% выхода, не горит в лаве.

---

### 2. Блоки и Механика (Машины)

Используем родительский класс ExtractorBlockEntity для общей физики.

#### Тир 1: Примитивный Экстрактор (PrimitiveExtractor)
*   Топливо: Нет (работает от внешнего тепла).
*   Температура:
    1. Зависит от блока снизу.
        *   Костер: 150° (Low).
        *   Костер душ: 250° (Mid).
        *   Огонь: 180 (Low).
        *   Огонь душ: 280 (Mid).
        *   Магма: 350° (High).
        *   Лава: 500° (Ultra).
     2. От биома
     3. От измерения
        * Жар Незера: 90°C - 115°C
        * Холод Энда: стабильные -40°C
        * Обычный мир: от -15°C до +60°C или другие измерения
    4. Погоды 
*   Слоты: 3 (Вход, Набор, Выход).
*   Геймплей: Дешевый, но неудобный (надо переставлять блоки для разных зелий).

#### Тир 2: Угольный Экстрактор (CoalExtractor)
*   Топливо: Уголь/Дерево (внутренний слот).
*   Температура: Управляется кнопкой в GUI.
*   Механика: Открыть заслонку и закрыть(нагнетания тепла и остывания)
*   Слоты: 4 (Вход, Набор, Топливо, Выход).

#### Tier 3: Электрический Экстрактор (ElectricExtractor)
*   Топливо: FE (Forge Energy).
*   Механика: Самый точный.
*   Управление: Можно выставить точную температуру (например, 235°).

---

### 3. Система Рецептов (The Brain)

Мы отказались от хардкодных мап в пользу Data-Driven подхода.

#### Класс рецепта: DistillationRecipe
*   Тип: thedisassembler:distillation.
*   Что делает:
    1.  Хранит "Базу" (Зелье Силы -> Стержень Ифрита, 400°).
    2.  Имеет метод assembleSediment, который сам добавляет:
        *   Модификаторы: Gunpowder (если Splash), Dragon Breath (если Lingering), Redstone (если Long), Glowstone (если Strong).
        *   Nether Wart: Добавляет почти всегда.
    3.  Считает математику:
        *   % Выхода = (Eff Набора) * (Штраф за перегрев) * (Рандом ±15%).
        *   Если % < 5, ингредиент исчезает.

#### Источники рецептов (Приоритет):
1.  Datapacks (Ваниль): Генерируются нами через ModRecipeProvider (DataGen) во время компиляции. Лежат внутри мода.

---

### 4. Автоматизация (Воронки/Трубы)
*   Insert: Можно класть Зелья (в слот 0), Наборы (в слот 1), Топливо (в слот 2, только для Тир 2).
*   Extract: Можно забирать ТОЛЬКО готовый Осадок или Пустую бутылку. Нельзя забрать зелье, пока оно варится.

---

### Что готово к реализацией
1.  Предметов + их текструки.
2.  Блоков (Абстракция).
3.  BlockEntity (Физика тепла, инвентарь, кэширование) + Тиры(1/3).
4.  Рецептов (Логика, Сериализация, DataGen).
5.  GUI(Menus & Screens): 50% 1 тир

### Что осталось сделать для Этапа 1 (TODO):
1. GUI (Menus & Screens): Нарисовать интерфейс печек (прогресс-бар, градусник с двумя стрелками: текущая и цель).
2. Реализовать всю абстракцию
3. Сетевой пакет: Для кнопки переключения температуры в Угольном экстракторе.

## Этап №2. Центрифуга

### 1. Новые предметы

#### A. ≈Порошок чего-то(будем менять исходят от что получаем в конце)
* Суть: Флешка, хранить ингредиент
* NBT: Хранить ID предмета
* Визуал: Лист бумаги(layer0) + Порошок под цвет ингредиента(layer1). Цвет берем через утилиту

### 2. Блоки и Механика (Машины)

Используем родитеский класс CentrifugeBlockEntity

#### Тир 1. Примитивная Центрифуга ()
* Энергия: Блок нагнетания воздуха
* Слоты: 3 входа, 9 выхода
* Геймплей: Под блок ставим один из Нагнетателей воздуха
* Вероятность: теряем 50% ингредиента

#### Тир 2. Улучшенная Центрифуга ()
* Энергия: Блок нагнетания воздуха
* Слоты: 5 входа, 9 выхода
* Геймплей: Требуется сильный нагнетатель (ручной не пойдет)
* Вероятность: теряем 25% ингредиента

#### Тир 3. Продвинутая Центрифуга ()
* Энергия: FE (ForgeEnergy)
* Слоты: 7 входа, 9 выхода
* Геймплей: Рядом с блоком должен быть блок воды
* Вероясность теряем 0% ингредиента

#### Нагнетатель воздуха (Ручные меха)
Размещение: Ставится вплотную сбоку к Центрифуге.
*   Механика:
    1.  Игрок кликает ПКМ по мехам.
    2.  Меха сжимаются (анимация) и издают звук "Пшшш".
    3.  Центрифуга получает импульс скорости (+20 speed).
    4.  Плату: У игрока тратится Сытость (Saturation), а не просто голод. Если сытости нет — тратится голод быстрее.
    *   *Фишка:* Если спамить кликами слишком быстро, персонаж получает эффект "Усталость" (Mining Fatigue) на пару секунд, чтобы не кликерами крутили, а ритмично.

#### Нагнетатель воздуха (Паровой Ротор)

*   Размещение: Строго под Центрифугой.
*   Топливо: Сжигаемое топливо
*   Механика:
    1.  Ты кладешь топливо.
    2.  Блок нагревает воду (внутри него есть свой резервуар или просто абстрактно) и выпускает пар вверх.
    3.  Вода: Снаружи (блок воды вплотную к Ротору с любой из 4 сторон).
    4.  Пар крутит Центрифугу с постоянной средней скоростью.
    *   *Баланс:* Автоматическая крутилка медленнее, чем если бы ты бешено кликал мехами вручную, но зато она работает сама, пока ты копаешь шахту.

#### Механика "Поедания" воды (Logic):

У Ротора должен быть внутренний Резервуар (пусть даже невидимый для игрока, просто переменная waterTank), например, на 1000 mB (1 ведро).

Цикл работы (Tick Event):

1.  Проверка топлива: Ротор горит (тратит уголь)? Если нет — стоим.
2.  Проверка пара: Есть ли вода во внутреннем резервуаре?
    *   Да: Тратим воду по чуть-чуть (например, 1 mB за 20 тиков) и крутим Центрифугу сверху.
    *   Нет (Бак пуст): Ротор ищет Блок Воды (Source Block) с боков (Север, Юг, Запад, Восток).
        *   Если находит:
            1.  Уничтожает блок воды (заменяет на воздух).
            2.  Заполняет свой бак на 1000 mB.
            3.  Звук: Громкое "Пшшшш!" (как лава в воду).
            4.  Частицы: Много облачков пара вокруг блока.

### Что готово к реализацией
НИХУЯ

## Этап 3. Кристаллизация

### 1. Новые предметы

#### A. Разжиженная слизь
* Суть: Связуящая итоговая компонета разсходуется потихотьку
* Визуал: Банка с светло-зеленой полупрозрачной жидостью
* Крафт: Банка воды + слизь + сахар

### 2. Блоки и Механика (Машины)

#### Тир 1. Примитивной Кристаллизатор
* Визуал: Ящик со стеклянными частями, где внутри растёт кристал. Каменная окантовка
* Слоты: 4 входа и 4 выхода
* Геймплей: нужно 4 одного порошка чтобы получить 1 ингредиент
* Время: от 30 сек до 1 мин от сложности ингредиента

#### Тир 2. Улучшенный Кристаллизатор
* Визуал: Такой же как у первого, но железная окантовка
* Слоты: 6 входа и 3 выхода
* Геймплей: Такой же
* Бонус: можно ускорить рост нагнетателем воздуха до х1.5
* Время: от 15 до 30 от сложности ингредиента

#### Тир 3. Продвинутый Кристаллизатор
* Визуал: Такой же как у первого, но обсидиановая окантовка
* Слоты: Столько же
* Геймплей: Такой же
* Бонус: можно ускорить рост нагнетателем воздуха до х2
* Время: от 5 до 10 от сложности ингредиента

#### Механика роста кристаллов

### Что реализовано
* Варочный Осадок (BrewingSedimentItem)
* Наборы для Дистилляции (DistillationKitItem)
* Примитивный Экстрактор (PrimitiveExtractor) нет GUI
* 
